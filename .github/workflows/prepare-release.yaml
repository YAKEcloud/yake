name: Prepare release
on:
  workflow_dispatch:
    inputs:
      version:
        description: 'New version to be released. Format: 1.3.3-7'
        required: true
        type: string

jobs:
  release:
    runs-on: 23ke-runner
    name: Release
    env:
      version: ${{ github.event.inputs.version }}

    steps:
      - name: Checkout source
        uses: actions/checkout@v3
        with:
          fetch-depth: 0
      - name: Configure git
        run: |
          git config user.name "23T"
          git config user.email operations@23technologies.cloud
      - name: Prepare release
        run: hack/prepare-release.sh "${{ env.version }}"
