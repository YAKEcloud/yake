# [gardener-extension-provider-openstack]
## ⚠️ Breaking Changes
* *[USER]* Adapt worker node hash calculation. Shoots that are currently using the server group feature will be rolled out. You can prevent the rollout if the shoot is annotated with `openstack.provider.extensions.gardener.cloud/worker-preserve-hash`. ([gardener/gardener-extension-provider-openstack#602](https://github.com/gardener/gardener-extension-provider-openstack/pull/602), [@kon-angelo](https://github.com/kon-angelo))
## ✨ New Features
* *[USER]* Optional CSI Manila driver deployment to support NFS persistent volumes out-of-the-box. ([gardener/gardener-extension-provider-openstack#572](https://github.com/gardener/gardener-extension-provider-openstack/pull/572), [@MartinWeindel](https://github.com/MartinWeindel))
* *[OPERATOR]* `csi-driver-node` is annotated with the `wait-for-csi-node` annotation. Gardener uses this to only schedule workload pods to a `Node` once the driver has been successfully registered with the `CSINode` object. ([gardener/gardener-extension-provider-openstack#583](https://github.com/gardener/gardener-extension-provider-openstack/pull/583), [@SimonKienzler](https://github.com/SimonKienzler))
* *[OPERATOR]* The `csi-snapshot-validation` Service deployed by the provider-openstack extension can now be topology-aware (depending on the Seed setting and the Shoot HA failure tolerance type). For more details, see the [Topology-aware Traffic Routing documentation](https://github.com/gardener/gardener/blob/v1.66.0/docs/usage/topology_aware_routing.md). ([gardener/gardener-extension-provider-openstack#589](https://github.com/gardener/gardener-extension-provider-openstack/pull/589), [@ialidzhikov](https://github.com/ialidzhikov))
## 🐛 Bug Fixes
* *[OPERATOR]* The stale healthcheck conditions from the extension are now properly cleaned up. ([gardener/gardener-extension-provider-openstack#590](https://github.com/gardener/gardener-extension-provider-openstack/pull/590), [@acumino](https://github.com/acumino))
* *[OPERATOR]* An issue has been fixed which caused undesired `PATCH` requests when updating the state in the `Worker` or `ShootState` resources. ([gardener/gardener-extension-provider-openstack#597](https://github.com/gardener/gardener-extension-provider-openstack/pull/597), [@oliver-goetz](https://github.com/oliver-goetz))
* *[OPERATOR]* An issue causing provider-openstack to wrongly delete the `extensions.gardener.cloud:provider-openstack:csi-snapshot-validation` ClusterRole and ClusterRoleBinding from the Seed cluster on every Shoot deletion is now fixed. ([gardener/gardener-extension-provider-openstack#603](https://github.com/gardener/gardener-extension-provider-openstack/pull/603), [@ialidzhikov](https://github.com/ialidzhikov))
## 🏃 Others
* *[OPERATOR]* Adapted extension components to support the [FullNetworkPoliciesInRuntimeCluster](https://github.com/gardener/gardener/blob/master/docs/deployment/feature_gates.md#list-of-feature-gates) feature gate introduced by `gardener/gardener` v1.66, see [here](https://github.com/gardener/gardener/blob/master/docs/concepts/resource-manager.md#networkpolicy-controller) and [#7352](https://github.com/gardener/gardener/pull/7589) for more information. ([gardener/gardener-extension-provider-openstack#578](https://github.com/gardener/gardener-extension-provider-openstack/pull/578), [@timuthy](https://github.com/timuthy))
* *[OPERATOR]* Add machine labels to the `ProviderConfig` of a worker pool to support rolling of its machines on label changes. ([gardener/gardener-extension-provider-openstack#579](https://github.com/gardener/gardener-extension-provider-openstack/pull/579), [@MartinWeindel](https://github.com/MartinWeindel))
* *[OPERATOR]* Add support for user-provided `NodeTemplate`s ([gardener/gardener-extension-provider-openstack#581](https://github.com/gardener/gardener-extension-provider-openstack/pull/581), [@kon-angelo](https://github.com/kon-angelo))
* *[OPERATOR]* Switched images from DockerHub to copies in Gardener GCR ([gardener/gardener-extension-provider-openstack#592](https://github.com/gardener/gardener-extension-provider-openstack/pull/592), [@robinschneider](https://github.com/robinschneider))
* *[OPERATOR]* provider-openstack does no longer use Gardener GCR copies for `openstack-cloud-controller-manager` and `cinder-csi-plugin` in versions 1.24, 1.25 and 1.26. Instead, the upstream GCR container images are used (`registry.k8s.io/provider-os/openstack-cloud-controller-manager` and `registry.k8s.io/provider-os/cinder-csi-plugin`). ([gardener/gardener-extension-provider-openstack#593](https://github.com/gardener/gardener-extension-provider-openstack/pull/593), [@ialidzhikov](https://github.com/ialidzhikov))
* *[OPERATOR]* The following images are updated: ([gardener/gardener-extension-provider-openstack#593](https://github.com/gardener/gardener-extension-provider-openstack/pull/593), [@ialidzhikov](https://github.com/ialidzhikov))
  * registry.k8s.io/provider-os/cinder-csi-plugin: v1.24.5 -> v1.24.6 (for Kubernetes 1.24 Shoots)
  * registry.k8s.io/provider-os/cinder-csi-plugin: v1.25.3 -> v1.25.5 (for Kubernetes 1.25 Shoots)
  * registry.k8s.io/provider-os/cinder-csi-plugin: v1.26.0 -> v1.26.2 (for Kubernetes 1.26 Shoots)
* *[OPERATOR]* Cloud-controller-manager Loadbalancer configuration has been updated: `monitorDelay: 60s -> 20s`, `monitorMaxRetries: 5 -> 2` ([gardener/gardener-extension-provider-openstack#594](https://github.com/gardener/gardener-extension-provider-openstack/pull/594), [@kon-angelo](https://github.com/kon-angelo))
* *[OPERATOR]* The `gardener-extension-admission-openstack` Service in the `gardener-extension-admission-openstack` chart can now be configured to be topology-aware. ([gardener/gardener-extension-provider-openstack#599](https://github.com/gardener/gardener-extension-provider-openstack/pull/599), [@ialidzhikov](https://github.com/ialidzhikov))
# [machine-controller-manager]
## 🐛 Bug Fixes
* *[USER]* An edge case where all the machineSets were scaled down to zero has been dealt with. ([gardener/machine-controller-manager#804](https://github.com/gardener/machine-controller-manager/pull/804), [@himanshu-kun](https://github.com/himanshu-kun))
# [terraformer]
## 🏃 Others
* *[OPERATOR]* Update TF_VERSION `0.15.5` -> `1.3.9` and update how the local providers are fetched and stored to be compatible with the latest TF specification. ([gardener/terraformer#133](https://github.com/gardener/terraformer/pull/133), [@kon-angelo](https://github.com/kon-angelo))